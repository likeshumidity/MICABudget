var accessPrivileges = {
  'vp': {
    'accounts': [
      "101001 - Instructional Supplies",
      "101002 - Office Supplies",
      "101006 - Special Event Supplies",
      "101007 - First Aid Supplies",
      "101008 - Uniforms",
      "101010 - Supplies-Other",
      "102001 - Equipment and Furniture Rental",
      "102002 - Equipment Repairs",
      "103003 - Security Systems Fees & Maint",
      "104000 - Vehicle Maintenance",
      "104001 - Vehicle Repairs & Maintenance",
      "104002 - Vehicle Fuel",
      "104003 - Vehicle Licences",
      "105001 - Travel/Training -Miscellaneous",
      "105009 - Training/Conference Fees",
      "105011 - Staff Training",
      "110001 - Catering-Meetings",
      "111004 - Safety Inspections",
      "121005 - Occupancy - Oil",
      "122004 - Occupancy-Trash Disposal",
      "122005 - Occupancy-Service Contracts",
      "122006 - Occupancy-Grounds Maintenance",
      "122007 - Occupancy-Maintenance Supplies",
      "122008 - Occupancy-Equipment & Fixtures",
      "122009 - Occupancy-Contract Rep & Maint",
      "122012 - Occupancy Permits and Taxes",
      "122014 - Occupancy - Pest Control",
      "130002 - Insurance-Self Insured Claims",
      "150001 - Consultants & Profsnl Services",
      "311108 - Contractual Temp Staff",
      "312101 - Exempt Staff",
      "312102 - Non-exempt Staff",
      "312103 - Part Time Staff",
      "312104 - Drivers-exempt",
      "312105 - Drivers-Non-exempt",
      "312106 - Drivers-Temporary",
      "312107 - Resident Assistants",
      "312108 - Temporary Staff MICA",
      "450000 - Event & Program Income",
      "450001 - Ticket/Registration Sales",
      "450002 - Art/Goods Sales",
      "450003 - Food Sales",
      "450004 - Other Event Income",
      "450005 - Meal Plan Sales",
      "450006 - Outside Catering Sales",
      "450007 - Point Food Sales",
      "571212 - Building Improvement",
      "571223 - Equipment and Furnishing",
      "573002 - Construction in Process - Bldg"
    ],
    'funds': [
      "110 - Current Unrestricted",
      "170 - Unexpended Plant",
      "175 - Capital Acquistion -In Process"
    ],
    'departments': [
      "40110 - Artist Residencies",
      "62010 - Campus Auxil Services Admin",
      "62015 - Human Resources",
      "62050 - Institutional Expenses",
      "64806 - Kramer House/121 Mosher Street",
      "71001 - Facilities Management",
      "71002 - FACMAN Campus-wide Services",
      "71003 - FACMAN Hazmat Disposal",
      "71051 - Health & Safety",
      "71110 - 1210 Mt Royal Avenue",
      "71120 - 1212 Mt Royal Avenue",
      "71130 - Bunting Center",
      "71160 - Fox Building",
      "71180 - Main Building",
      "71190 - Main Building Annex",
      "71191 - Lazarus Studio Center",
      "71192 - North Avenue Firehouse",
      "71193 - Brown Center",
      "71195 - Maryland General Building",
      "71196 - 1515 Mt Royal Ave",
      "71200 - Mt Royal Station",
      "71201 - Madison Ave Warehouse",
      "71202 - 1801 Falls Rd",
      "71211 - Pearlstone Park",
      "71212 - Amtrak-MICA Lot",
      "71213 - Triangle Park",
      "71220 - Dolphin Building",
      "71240 - 1206-08 Mt Royal Av (Stu Ctr)",
      "71251 - 1500 Mt Royal Ave",
      "71252 - 1502 Mt Royal Ave",
      "71253 - 1504 Mt Royal Ave",
      "71254 - 1508 Mt Royal Ave",
      "71256 - 1534 Mt Royal Ave",
      "71403 - 1229 Mt. Royal Avenue-Bungalow",
      "71407 - 10 E. North Ave",
      "71501 - FACMAN Vehicles",
      "72001 - Building Svcs (Housekeeping)",
      "75001 - Campus Safety",
      "90020 - College Store",
      "90091 - MICA Facilities Rentals",
      "90135 - Office of Events",
      "91030 - Commons",
      "91035 - Commons II",
      "91060 - Meyerhoff House Dorm",
      "91070 - Gateway",
      "91080 - MICA Place",
      "91103 - Artist's Palette",
      "91104 - Nancy Cafe",
      "91105 - Parkhurst Food Service",
      "99101 - Capital - Land & Building",
      "99102 - Capital - Buildng Improvements",
      "99103 - Capital - Operations Equipment",
      "99105 - Capital - Offc Technology Proj"
    ],
    'programs': [
      "6058 - 10 E. North Ave",
      "6036 - 1500 Mount Royal T/H",
      "6056 - 1801 Falls Road",
      "6013 - Art Tech Center",
      "6020 - Brown Center",
      "6018 - Bunting Center",
      "6103 - Cafe Doris",
      "8003 - Campus Network Projects",
      "6012 - College Store Building",
      "1201 - Elevators",
      "4710 - Facilities Management",
      "6023 - Fire Station",
      "6017 - Fox Building",
      "1108 - Janitorial Service",
      "6008 - Lazarus Studio Center",
      "6016 - Main Building",
      "6027 - Maryland General Building",
      "6009 - Meyerhoff House",
      "6010 - Mt. Royal Station Building",
      "6019 - The Commons",
      "6052 - The Commons II",
      "6028 - The Gateway"
    ],
    'years': [
      "2017",
      "2016",
      "2015",
      "2014",
      "2013",
      "2012",
      "2011"
    ]
  },
  'hiringmanager': {
    'accounts': [
      "101001 - Instructional Supplies",
      "101002 - Office Supplies",
      "101006 - Special Event Supplies",
      "101007 - First Aid Supplies",
      "101008 - Uniforms",
      "101010 - Supplies-Other",
      "102001 - Equipment and Furniture Rental",
      "102002 - Equipment Repairs",
      "103003 - Security Systems Fees & Maint",
      "104000 - Vehicle Maintenance",
      "104001 - Vehicle Repairs & Maintenance",
      "104002 - Vehicle Fuel",
      "104003 - Vehicle Licences",
      "105001 - Travel/Training -Miscellaneous",
      "105009 - Training/Conference Fees",
      "105011 - Staff Training",
      "110001 - Catering-Meetings",
      "111004 - Safety Inspections",
      "121005 - Occupancy - Oil",
      "122004 - Occupancy-Trash Disposal",
      "122005 - Occupancy-Service Contracts",
      "122006 - Occupancy-Grounds Maintenance",
      "122007 - Occupancy-Maintenance Supplies",
      "122008 - Occupancy-Equipment & Fixtures",
      "122009 - Occupancy-Contract Rep & Maint",
      "122012 - Occupancy Permits and Taxes",
      "122014 - Occupancy - Pest Control",
      "130002 - Insurance-Self Insured Claims",
      "150001 - Consultants & Profsnl Services",
      "311108 - Contractual Temp Staff",
      "312101 - Exempt Staff",
      "312102 - Non-exempt Staff",
      "312103 - Part Time Staff",
      "312104 - Drivers-exempt",
      "312105 - Drivers-Non-exempt",
      "312106 - Drivers-Temporary",
      "312107 - Resident Assistants",
      "312108 - Temporary Staff MICA"
    ],
    'funds': [
      "110 - Current Unrestricted",
      "170 - Unexpended Plant",
      "175 - Capital Acquistion -In Process"
    ],
    'departments': [
      "40110 - Artist Residencies",
      "62010 - Campus Auxil Services Admin",
      "62015 - Human Resources",
      "62050 - Institutional Expenses",
      "64806 - Kramer House/121 Mosher Street",
      "71001 - Facilities Management",
      "71002 - FACMAN Campus-wide Services",
      "71003 - FACMAN Hazmat Disposal",
      "71051 - Health & Safety",
      "71110 - 1210 Mt Royal Avenue",
      "71120 - 1212 Mt Royal Avenue",
      "71130 - Bunting Center",
      "71160 - Fox Building",
      "71180 - Main Building",
      "71190 - Main Building Annex",
      "71191 - Lazarus Studio Center",
      "71192 - North Avenue Firehouse",
      "71193 - Brown Center",
      "71195 - Maryland General Building",
      "71196 - 1515 Mt Royal Ave",
      "71200 - Mt Royal Station",
      "71201 - Madison Ave Warehouse",
      "71202 - 1801 Falls Rd",
      "71211 - Pearlstone Park",
      "71212 - Amtrak-MICA Lot",
      "71213 - Triangle Park",
      "71220 - Dolphin Building",
      "71240 - 1206-08 Mt Royal Av (Stu Ctr)",
      "71251 - 1500 Mt Royal Ave",
      "71252 - 1502 Mt Royal Ave",
      "71253 - 1504 Mt Royal Ave",
      "71254 - 1508 Mt Royal Ave",
      "71256 - 1534 Mt Royal Ave",
      "71403 - 1229 Mt. Royal Avenue-Bungalow",
      "71407 - 10 E. North Ave",
      "71501 - FACMAN Vehicles",
      "72001 - Building Svcs (Housekeeping)",
      "75001 - Campus Safety",
      "90020 - College Store",
      "90091 - MICA Facilities Rentals",
      "90135 - Office of Events",
      "91030 - Commons",
      "91035 - Commons II",
      "91060 - Meyerhoff House Dorm",
      "91070 - Gateway",
      "91080 - MICA Place",
      "91103 - Artist's Palette",
      "91104 - Nancy Cafe",
      "91105 - Parkhurst Food Service"
    ],
    'programs': [
      "6058 - 10 E. North Ave",
      "6036 - 1500 Mount Royal T/H",
      "6056 - 1801 Falls Road",
      "6013 - Art Tech Center",
      "6020 - Brown Center",
      "6018 - Bunting Center",
      "6103 - Cafe Doris",
      "8003 - Campus Network Projects",
      "6012 - College Store Building",
      "1201 - Elevators",
      "4710 - Facilities Management",
      "6023 - Fire Station",
      "6017 - Fox Building",
      "1108 - Janitorial Service",
      "6008 - Lazarus Studio Center",
      "6016 - Main Building",
      "6027 - Maryland General Building",
      "6009 - Meyerhoff House",
      "6010 - Mt. Royal Station Building",
      "6019 - The Commons",
      "6052 - The Commons II",
      "6028 - The Gateway"
    ],
    'years': [
      "2017",
      "2016",
      "2015",
      "2014",
      "2013",
      "2012",
      "2011"
    ]
  },
  'budgetmanager': {
    'accounts': [
      "101001 - Instructional Supplies",
      "101002 - Office Supplies",
      "101006 - Special Event Supplies",
      "101007 - First Aid Supplies",
      "101008 - Uniforms",
      "101010 - Supplies-Other",
      "102001 - Equipment and Furniture Rental",
      "102002 - Equipment Repairs",
      "103003 - Security Systems Fees & Maint",
      "104000 - Vehicle Maintenance",
      "104001 - Vehicle Repairs & Maintenance",
      "104002 - Vehicle Fuel",
      "104003 - Vehicle Licences",
      "105001 - Travel/Training -Miscellaneous",
      "105009 - Training/Conference Fees",
      "105011 - Staff Training",
      "110001 - Catering-Meetings",
      "111004 - Safety Inspections",
      "121005 - Occupancy - Oil",
      "122004 - Occupancy-Trash Disposal",
      "122005 - Occupancy-Service Contracts",
      "122006 - Occupancy-Grounds Maintenance",
      "122007 - Occupancy-Maintenance Supplies",
      "122008 - Occupancy-Equipment & Fixtures",
      "122009 - Occupancy-Contract Rep & Maint",
      "122012 - Occupancy Permits and Taxes",
      "122014 - Occupancy - Pest Control",
      "130002 - Insurance-Self Insured Claims",
      "150001 - Consultants & Profsnl Services",
      "450000 - Event & Program Income",
      "450001 - Ticket/Registration Sales",
      "450002 - Art/Goods Sales",
      "450003 - Food Sales",
      "450004 - Other Event Income",
      "450005 - Meal Plan Sales",
      "450006 - Outside Catering Sales",
      "450007 - Point Food Sales",
      "571212 - Building Improvement",
      "571223 - Equipment and Furnishing",
      "573002 - Construction in Process - Bldg"
    ],
    'funds': [
      "110 - Current Unrestricted",
      "170 - Unexpended Plant",
      "175 - Capital Acquistion -In Process"
    ],
    'departments': [
      "40110 - Artist Residencies",
      "62010 - Campus Auxil Services Admin",
      "62015 - Human Resources",
      "62050 - Institutional Expenses",
      "64806 - Kramer House/121 Mosher Street",
      "71001 - Facilities Management",
      "71002 - FACMAN Campus-wide Services",
      "71003 - FACMAN Hazmat Disposal",
      "71051 - Health & Safety",
      "71110 - 1210 Mt Royal Avenue",
      "71120 - 1212 Mt Royal Avenue",
      "71130 - Bunting Center",
      "71160 - Fox Building",
      "71180 - Main Building",
      "71190 - Main Building Annex",
      "71191 - Lazarus Studio Center",
      "71192 - North Avenue Firehouse",
      "71193 - Brown Center",
      "71195 - Maryland General Building",
      "71196 - 1515 Mt Royal Ave",
      "71200 - Mt Royal Station",
      "71201 - Madison Ave Warehouse",
      "71202 - 1801 Falls Rd",
      "71211 - Pearlstone Park",
      "71212 - Amtrak-MICA Lot",
      "71213 - Triangle Park",
      "71220 - Dolphin Building",
      "71240 - 1206-08 Mt Royal Av (Stu Ctr)",
      "71251 - 1500 Mt Royal Ave",
      "71252 - 1502 Mt Royal Ave",
      "71253 - 1504 Mt Royal Ave",
      "71254 - 1508 Mt Royal Ave",
      "71256 - 1534 Mt Royal Ave",
      "71403 - 1229 Mt. Royal Avenue-Bungalow",
      "71407 - 10 E. North Ave",
      "71501 - FACMAN Vehicles",
      "72001 - Building Svcs (Housekeeping)",
      "75001 - Campus Safety",
      "90020 - College Store",
      "90091 - MICA Facilities Rentals",
      "90135 - Office of Events",
      "91030 - Commons",
      "91035 - Commons II",
      "91060 - Meyerhoff House Dorm",
      "91070 - Gateway",
      "91080 - MICA Place",
      "91103 - Artist's Palette",
      "91104 - Nancy Cafe",
      "91105 - Parkhurst Food Service",
      "99101 - Capital - Land & Building",
      "99102 - Capital - Buildng Improvements",
      "99103 - Capital - Operations Equipment",
      "99105 - Capital - Offc Technology Proj"
    ],
    'programs': [
      "6058 - 10 E. North Ave",
      "6036 - 1500 Mount Royal T/H",
      "6056 - 1801 Falls Road",
      "6013 - Art Tech Center",
      "6020 - Brown Center",
      "6018 - Bunting Center",
      "6103 - Cafe Doris",
      "8003 - Campus Network Projects",
      "6012 - College Store Building",
      "1201 - Elevators",
      "4710 - Facilities Management",
      "6023 - Fire Station",
      "6017 - Fox Building",
      "1108 - Janitorial Service",
      "6008 - Lazarus Studio Center",
      "6016 - Main Building",
      "6027 - Maryland General Building",
      "6009 - Meyerhoff House",
      "6010 - Mt. Royal Station Building",
      "6019 - The Commons",
      "6052 - The Commons II",
      "6028 - The Gateway"
    ],
    'years': [
      "2017",
      "2016",
      "2015",
      "2014",
      "2013",
      "2012",
      "2011"
    ]
  },
  'staffdriver': {
    'accounts': [
      "104000 - Vehicle Maintenance",
      "104001 - Vehicle Repairs & Maintenance",
      "104002 - Vehicle Fuel"
    ],
    'funds': [
      "110 - Current Unrestricted"
    ],
    'departments': [
      "71501 - FACMAN Vehicles"
    ],
    'programs': [
    ],
    'years': [
      "2016"
    ]
  }
};

var users = {
  'vp': {
    'title': 'Vice President',
  },
  'hiringmanager': {
    'title': 'Hiring Manager',
  },
  'budgetmanager': {
    'title': 'Budget Manager',
  },
  'staffdriver': {
    'title': 'Staff Driver'
  }
};

var thisUser = 'staffdriver' // Set default user if none selected

var selectedAccounts = [];
var selectedFunds = [];
var selectedDepartments = [];
var selectedPrograms = [];
var selectedYears = [];

var availableAccounts = [];
var availableFunds = [];
var availableDepartments = [];
var availablePrograms = [];
var availableYears = [];

var bookmarksPublic = [
  'All',
  'None',
  'Expense - Capital',
  'Expense - Comp',
  'Expense - NonComp',
  'Expense - Vehicles',
  'Revenue'
];

// name of autocomplete list, 0 = single select or 1 = multi-select, length of
// id value
var autocompletes = [
  ['accounts', 3, 6],
  ['funds', 3, 3],
  ['departments', 3, 5],
  ['programs', 3, 4],
  ['years', 3, 4],
  ['bookmarksPublic', 4, 0]
  ['bookmarksPrivate', 5, 0]
];

$('.userchange').click( function() {
  thisUser = $(this)
    .context
    .id
    .substr(11);

  loadAutocompletes();
});

$(document).ready(loadAutocompletes);

function loadAutocompletes() {
  for (i = 0; i < autocompletes.length; i++) {
    if (autocompletes[i][1] == 0) {
      $('#choose-' + autocompletes[i]).autocomplete({
        source: eval(autocompletes[i][0])
      });
    } else if (autocompletes[i][1] == 1) {
      $('#filter-' + autocompletes[i][0]).append(
        inputSelectFromList(eval('available' + toCapitalized(autocompletes[i][0])),
          autocompletes[i][2])
      );

      $('#filter-' + autocompletes[i][0]).select2();
    } else if (autocompletes[i][1] == 2) {
      $('#choose-' + autocompletes[i]).append(
        inputSelectFromList(eval(autocompletes[i][0]),
          100)
      );

      $('#choose-' + autocompletes[i]).select2();
    } else if (autocompletes[i][1] == 3) {
      populateChartfieldLists(thisUser);

      $('#filter-' + autocompletes[i][0]).append(
        inputSelectFromList(eval('available' + toCapitalized(autocompletes[i][0])),
          autocompletes[i][2])
      );

      $('#filter-' + autocompletes[i][0]).select2();
    } else if (autocompletes[i][1] == 4) {
      $('#choose-bookmarks')
        .append('<optgroup label="Public"></optgroup>')
        .append(inputSelectFromList(eval(autocompletes[i][0]), 100));

      $('#choose-' + autocompletes[i]).select2();
    }
  }
}

function inputSelectFromList(listOfElements, valueLength) {
  var htmlFragment = '';
  for (j = 0; j < listOfElements.length; j++) {
    htmlFragment += '<option value="'
      + listOfElements[j].substr(0,valueLength)
      + '">'
      + listOfElements[j]
      + '</option>';
  }

  return htmlFragment;
}

function toCapitalized(txt) {
  return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
}

function populateChartfieldLists(username) {
  // Populate available code lists by permissions allowed
  // DO NOT USE IN PRODUCTION CAN EASILY BE HACKED
  availableAccounts = eval('accessPrivileges.' + username + '.accounts');
  availableFunds = eval('accessPrivileges.' + username + '.funds');
  availableDepartments = eval('accessPrivileges.' + username + '.departments');
  availablePrograms = eval('accessPrivileges.' + username + '.programs');
  availableYears = eval('accessPrivileges.' + username + '.years');
}


